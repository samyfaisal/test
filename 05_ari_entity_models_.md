# Chapter 5: ARI Entity Models

After learning how to control phone systems with action interfaces ([Chapter 4](04_ari_action_interfaces_.md)), let's meet the phone system "characters" we're controlling! Meet **ARI Entity Models** - the digital puppets representing real phone activities! ðŸŽ­

## Why We Need Phone Puppets

Imagine running a pizza delivery call center ðŸ•ðŸ“ž. You need to track:
- Who's calling (ðŸ‘©ðŸ’¼ Customer)
- Where calls are happening (ðŸ“ž Phone line)
- Recorded orders (âºï¸ Tape recorder)
- Group calls (ðŸ‘¥ Team meeting)

ARI Entity Models are like ID cards for these phone system elements. They help our program understand and manage real-world phone activities through code!

## Meet the Phone System Cast ðŸŒŸ

Here are the main characters in our telephony play:

| Model          | Real-World Equivalent | Superpower                          |
|----------------|-----------------------|-------------------------------------|
| `Channel`      | Phone Call ðŸ“ž         | Represents a single conversation    |
| `Bridge`       | Conference Room ðŸ¢    | Manages merged calls                |
| `Playback`     | Speaker System ðŸ”Š     | Handles audio messages              |
| `Recording`    | Tape Recorder âºï¸      | Manages call recordings             |

## Pizza Order Example ðŸ•

Let's see how these models work together for a delivery order:

```mermaid
sequenceDiagram
    participant Customer
    participant Channel
    participant Playback
    participant Recording
    
    Customer->>Channel: Calls pizza shop
    Channel->>Playback: "Play welcome message"
    Customer->>Channel: Presses 1 for delivery
    Channel->>Recording: Start recording order
    Recording-->>Channel: Save to "order123.wav"
```

## Channel: The Phone Call Puppet

Here's what a simplified `Channel` model looks like:
```csharp
public class Channel
{
    public string Id { get; set; }      // Unique call ID: "PizzaCall-123"
    public string Name { get; set; }    // Technical name: "SIP/pizza-0001"
    public string State { get; set; }   // "Ringing", "Connected", "HungUp"
}
```

This is like a progress report for a phone call:
- `Id`: Call's social security number
- `Name`: Its official job title
- `State`: Current activity status

## Bridge: The Conference Room Manager

A conference bridge for team orders might look like:
```csharp
public class Bridge
{
    public string Id { get; set; }          // "DeliveryTeamConf"
    public List<string> Channels { get; set; } // ["CustomerCall", "ChefCall"]
    public string BridgeType { get; set; }  // "mixing" (merges audio)
}
```

This model helps track:
- Which calls are in the conference
- How audio is mixed
- Conference settings

## Behind the Scenes Magic ðŸ”®

When a new call comes in:
```mermaid
sequenceDiagram
    participant PhoneSystem
    participant ChannelModel
    participant OurCode
    
    PhoneSystem->>ChannelModel: New call! Create channel
    ChannelModel->>OurCode: Here's new Channel {Id: "123", State: "Ringing"}
    OurCode->>ChannelModel: Answer call!
    ChannelModel->>PhoneSystem: Update state to "Connected"
```

The models act as messengers between our code and the real phone system!

## Peeking at the Puppet Strings

Let's look at part of the actual `Recording` model:
```csharp
public class LiveRecording
{
    public string Name { get; set; }    // "order_2023-08-01"
    public string Format { get; set; } // "wav" or "mp3"
    public int Duration { get; set; }   // 45 seconds
}
```

This helps us:
- Track recording length
- Manage file formats
- Handle storage names

## Real-World Example: Failed Delivery

What if a customer hangs up mid-order? The models help detect this:
```csharp
if (channel.State == "HungUp")
{
    Console.WriteLine($"Call {channel.Id} ended abruptly!");
    recording.Stop(); // Auto-saves partial recording
}
```

## Youâ€™re Now a Phone Puppeteer! ðŸŽ‰

**What we learned:**
- Entity models represent real phone activities
- Four main types handle calls, conferences, audio, and recordings
- Models provide snapshots of phone system state
- They enable easy tracking and management of calls

Ready to learn how to combine these concepts into complete call tasks? Letâ€™s move to [Chapter 6: Call Handling Tasks](06_call_handling_tasks_.md) where weâ€™ll choreograph our phone puppets into a beautiful dance! ðŸ’ƒðŸ•º

---

Generated by [AI Codebase Knowledge Builder](https://github.com/The-Pocket/Tutorial-Codebase-Knowledge)